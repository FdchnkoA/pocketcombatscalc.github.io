<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="page_type" content="np-template-header-footer-from-plugin" />
    <title>Калькулятор</title>
    <link rel="stylesheet" href="nicepage.css" media="screen" />
<link rel="stylesheet" href="Калькулятор.css" media="screen" />
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.9.5, nicepage.com" />
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i" />
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" />
    
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}   </script>
    <meta name="theme-color" content="#478ac9" />
    <meta property="og:title" content="Калькулятор" />
    <meta property="og:type" content="website" />
  </head>
  <body class="u-body u-xl-mode"><header class="u-clearfix u-header u-header" id="sec-e629"><div class="u-align-left u-clearfix u-sheet u-sheet-1"></div></header>
    <h1 align="center">Калькулятор</h1>
      <section class="u-clearfix u-section-1" id="sec-ee5a">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-form u-form-1">
          <form action="#" class="u-clearfix u-form-spacing-10 u-form-vertical u-inner-form" name="form" style="padding: 10px;">
            
           
		  
            <div class="u-form-group u-form-group-1">
              <label for="text-70a3" class="u-custom-font u-font-montserrat u-label u-label-1">Профессия</label>
               <select id="text-70a3"" name="select" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white">
  		 <option value="0">Маг</option>
  		 <option value="1">Воин</option>
  		 <option value="2">Охотник</option>
		 <option value="3">Новичок</option>
	      </select>
	    </div>
            <div class="u-form-group u-form-group-2">
              <label for="text-364f" class="u-custom-font u-font-montserrat u-label u-label-2">Уровень</label>
              <input type="number" min="1" max="150" placeholder="Введите уровень персонажа" id="text-364f" name="text-1" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-3">
              <label for="text-f9b5" class="u-custom-font u-font-montserrat u-label u-label-3">Сила</label>
              <input type="number" min="-25" max="200" placeholder="Введите количество силы" id="text-f9b5" name="text-4" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-4">
              <label for="text-e09f" class="u-custom-font u-font-montserrat u-label u-label-4">Ловкость</label>
              <input type="number" min="-25" max="200" placeholder="Введите количество ловкости" id="text-e09f" name="text-5" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-5">
              <label for="text-67b6" class="u-custom-font u-font-montserrat u-label u-label-5">Интуиция</label>
              <input type="number" min="-25" max="200" placeholder="Введите количество интуиции" id="text-67b6" name="text-7" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-6">
              <label for="text-7525" class="u-custom-font u-font-montserrat u-label u-label-6">Живучесть</label>
              <input type="number" min="-25" max="200" placeholder="Введите количество живучести" id="text-7525" name="text-2" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-7">
              <label for="text-43ae" class="u-custom-font u-font-montserrat u-label u-label-7">Мудрость</label>
              <input type="number" min="-25" max="200" placeholder="Введите количество мудрости" id="text-43ae" name="text-6" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-8">
              <label for="text-a87a" class="u-custom-font u-font-montserrat u-label u-label-8">Удача</label>
              <input type="number" min="-25" max="200" placeholder="Введите количество удачи" id="text-a87a" name="text-3" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
	    <div class="u-form-group u-form-group-12">
              <label for="text-aa92" class="u-custom-font u-font-montserrat u-label u-label-10">Минимальный магический урон</label>
              <input type="number" min="1" max="50" placeholder="Введите минимальный магический урон" id="minMagicDamageEntry" name="text-12" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
	    <div class="u-form-group u-form-group-13">
	      <label for="text-aa93" class="u-custom-font u-font-montserrat u-label u-label-10">Максимальный магический урон</label>
              <input type="number" min="1" placeholder="Введите максимальный магический урон" id="maxMagicDamageEntry" name="text-13" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
	    <div class="u-form-group u-form-group-11">
              <label for="text-aa90" class="u-custom-font u-font-montserrat u-label u-label-10">Броня</label>
              <input type="number" min="1" placeholder="Введите количество брони" id="text-aa91" name="text-10" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-9">
              <label for="text-8e96" class="u-custom-font u-font-montserrat u-label u-label-9">Заточка щита</label>
              <input type="number" min="0" max="10" placeholder="Введите заточку щита" id="text-8e96" name="text-9" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
            <div class="u-form-group u-form-group-10">
              <label for="text-aa90" class="u-custom-font u-font-montserrat u-label u-label-10">Шанс наложить дебафф</label>
              <input type="number" min="1" max="90" placeholder="Введите общий шанс наложить дебафф" id="text-aa90" name="text-8" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" />
            </div>
	    <div class="u-form-group u-form-group-11">
	      <label for="LightEntry" class="u-custom-font u-font-montserrat u-label u-label-11">Урон от света в %</label>	
	      <input type="number" min="1" max="70" name="bafs" value="LightEntry" placeholder="Введите урон от света" id="LightEntry" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white"/>
	    </div>
	    <div class="u-form-group u-form-group-12">
	      <label for="staffSharpeningEntry" class="u-custom-font u-font-montserrat u-label u-label-12">Заточка посоха</label>				     
	      <input type="number"  min="1" max="10" name="bafs" value="staffSharpeningEntry" placeholder="Введите заточку посоха" id="staffSharpeningEntry" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white"/>
	    </div>
	    <div class="u-form-group u-form-group-13">
	      <input type="checkbox" value="RunaJiznetoka" /><span style="padding-right: 1em"> Руна Жизнетока</span>
	      <input type="radio" name="bafs" id="Healstaff" value="1"/><span style="padding-right: 1em">Посох целителя</span>
	      <input type="radio" name="bafs" id="Blessingstaff" value="2" /><span style="padding-right: 1em">Благословление</span>
	    </div>
            <div class="u-align-center u-form-group u-form-submit">
              <a href="#" class="u-active-palette-1-dark-1 u-border-2 u-border-active-black u-btn u-btn-submit u-button-style u-palette-1-light-1 u-btn-1">Рассчитать<br>
              </a>
              <button id ="buttoncalc" value="submit" class="u-form-control-hidden" />
            </div>
            <input type="hidden" value="" name="recaptchaResponse" />
          </form>
        </div>
      </div>
    </section>
    
    
    
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-18fc">
      <div style="padding: 1.5em;">
         <a style="color: #F5D654; margin:1em; white-space: nowrap;" href="https://vk.com/pocketcombats">Официальное сообщество в ВК</a>
         <a style="color: #F5D654; margin:1em; white-space: nowrap;" href="https://t.me/PocketYa">Обратная связь</a>
	 <a style="color: #F5D654; margin:1em; white-space: nowrap;" href="https://github.com/pocketcombatscalc/pocketcombatscalc.github.io/blob/main/nicepage.js" download>Скачать калькулятор</a>
      </div>
    </footer>
    <section class="u-backlink u-clearfix u-grey-80">
    </section>
  </body>
</html>

<script>
  var button = document.getElementById('buttoncalc');
  button.onclick=()=>calc();

  function calc(){
    let prof = Number(document.getElementById('text-70a3').value);
    let level = Number(document.getElementById('text-364f').value);
    let strenght = Number(document.getElementById('text-f9b5').value);
    let dexterity = Number(document.getElementById('text-e09f').value);
    let intuition = Number(document.getElementById('text-67b6').value);
    let endurance = Number(document.getElementById('text-7525').value);
    let wisdom = Number(document.getElementById('text-43ae').value);
    let luck = Number(document.getElementById('text-a87a').value);
    let shield = Number(document.getElementById('text-8e96').value);
    let debaffchance = Number(document.getElementById('text-aa90').value);
    let armor = Number(document.getElementById('text-aa91').value);
    let minMagicDamageEntry = Number(document.getElementById('minMagicDamageEntry').value);
    let maxMagicDamageEntry = Number(document.getElementById('maxMagicDamageEntry').value);
    let LightEntry = Number(document.getElementById('LightEntry').value);
    let staffSharpeningEntry = Number(document.getElementById('staffSharpeningEntry').value);
 
						    
						    
						    
    let mana = manaCalc(prof, level, wisdom);
    let HP = healthMax(prof, level, endurance);
    let shieldDam = shieldThrow(shield, intuition, endurance);
    let uvs = Uves(dexterity);
    let evasion = evasionplayer(level, dexterity, luck);
    let accuracy = accuracyplayer(level, intuition, luck);
    let radshield = radiantshield(strenght, shield);
    let blocksword = blockwithsword(intuition);
    let heal = Healing(level, intuition, wisdom, minMagicDamageEntry, maxMagicDamageEntry, LightEntry, RunaJiznetoka, Healstaff, Blessingstaff, bafs);
    let blessing = blessingWeapon(intuition, wisdom);
    let flockofcrows = crows(intuition, wisdom);
    let debchance = debaffs(dexterity, debaffchance);
    let attribleft = calcStat(level, strenght, dexterity, intuition, endurance, wisdom, luck);
    let attrib = calculate(level);
    let arm = Armorfunc(armor);

    alert("Осталось атрибутов: " + attribleft + "\r\Затраченные атрибуты: " + attrib + "\r\nМана: " + mana + "\r\nЗдоровье: " + HP + "\r\nФиз.урон уменьшен на: " + arm + "%" + "\r\nМеткость: " + accuracy + "\r\nУклонение: " + evasion + "\r\nУрон Броска щита: " + shieldDam + "\r\nИсцеление: " + heal + "\r\nБлок мечом: " + blocksword + "%" + "\r\nСияющий щит: " + radshield + "%" + "\r\nСтая воронов: " + flockofcrows + "\r\nБлагословление оружия: урон увеличен на " + blessing + "\r\nУдар в спину: урон увеличен в " + uvs + "\r\nШанс наложить дебафф: " + debchance + "%");

  }
function Healing(level, intuition, wisdom, minMagicDamageEntry, maxMagicDamageEntry, LightEntry, RunaJiznetoka, Healstaff, Blessingstaff, bafs){
   
   minheal = Math.round(4 *(level + (intuition + wisdom)/3))
   minheal = Math.round(minheal + (minheal *(LightEntry /100)))
   
   if (bafs == 1){
       minheal = Math.round(minheal + (minheal * (staffSharpeningEntry * 0.025) + minMagicDamageEntry))
       if (RunaJiznetoka.checked){
           minheal = Math.round(minheal + (minheal * 30)/100)
       }
   }  
   if (bafs == 2){
        minheal = Math.round(minheal + (minheal * (staffSharpeningEntry * 0.05) + minMagicDamageEntry))
        if (RunaJiznetoka.checked){
            minheal = Math.round(minheal + (minheal * 30)/100)
        }
   }   
   maxheal = Math.round(4 *(level + (intuition + wisdom)/2))
   maxheal = Math.round(maxheal + (maxheal *(LightEntry /100)))
   
   if (bafs == 1){
       maxheal = Math.round(maxheal + (maxheal * (staffSharpeningEntry * 0.025) + maxMagicDamageEntry))
       if (RunaJiznetoka.checked){
           maxheal = Math.round(maxheal + (maxheal * 30)/100)
       }
   }   
   if (bafs == 2){
        maxheal = Math.round(maxheal + (maxheal * (staffSharpeningEntry * 0.05) + maxMagicDamageEntry))
        if (RunaJiznetoka.checked){
                 maxheal = Math.round(maxheal + (maxheal*30)/100)
        }  
    }  
    fin = String(minheal) + " - " + String(maxheal);
    return fin
}
function manaCalc(prof, level, wisdom){
    let koefMana = (100 + wisdom)/100;
    let sumMana = 0;
    if (prof == 0){
        if(level <= 70)
            sumMana = (8 + level * 5)*koefMana;
        else
            sumMana = (8 + level * 7)*koefMana;
    }

    if (prof == 1 || prof == 2){
        if(level <= 70)
            sumMana = (8 + level * 2)*koefMana;
        else
            sumMana = (8 + level * 3)*koefMana;
    }

    if (prof == 3){
            sumMana = (8 + level )*koefMana;
    }
    if (prof >= 4){
        sumMana = 1;
    }
    sumMana = Math.floor(sumMana);
    return sumMana;
    }

function healthMax(prof, level, endurance){
    base = Math.floor(parseInt(35 + level * 5));
    let maxHp = 1;
    for (var i = 2; i < level + 1; i++)
       maxHp += i;

    if (prof == 0)
        maxHp = Math.floor(base + maxHp * ((level <= 70) ? 0.3 : 0.55));
    if (prof == 1)
        maxHp = Math.floor(base + maxHp * ((level <= 70) ? 0.7 : 1.1));
    if (prof == 2)
        maxHp = Math.floor(base + maxHp * ((level <= 70) ? 0.5 : 0.8));
    if (prof == 3)
        maxHp = Math.floor(base + maxHp);

    koefVit = Math.floor(((maxHp*endurance)/100) - endurance);
    maxHp = Math.ceil(maxHp + koefVit);

    if (prof >= 4) {
        maxHP = 1
        koefVit = 1
        maxHp = 1
    }
    return maxHp
}

function shieldThrow(shield, intuition, endurance){
    minDamage = Math.floor(5* (endurance *6 + Math.floor(endurance * endurance /200)*4 + Math.floor(intuition /5) + (shield * shield *3)))
    maxDamage = Math.ceil(6* (endurance * 6 + Math.floor(endurance * endurance / 200)*4 + Math.floor(intuition /5) + (shield * shield *3)))
    damageShield = String(minDamage) + ' - ' + String(maxDamage)
    return damageShield
}

function evasionplayer(level, dexterity, luck){
    evasion = 100 + level + dexterity + Math.floor(luck/5);
    return evasion
}
function accuracyplayer(level, intuition, luck){
    accuracy = 175 + level + intuition + Math.floor(luck/3);
    return accuracy
}
function radiantshield(strenght, shield){
    radshield = parseInt(strenght/10 * shield);
    return radshield
}
function blockwithsword(intuition){
    blocksword = intuition//2 + 10;
    return blocksword
}

function blessingWeapon(intuition, wisdom){
    blessing = 5 + (wisdom + Math.floor((intuition/2)-38)/2);
    if (blessing <= 5){
      blessing = 5
    }
    if (blessing >= 50){
      blessing = 50
    }
    return blessing
}
function crows(intuition, wisdom){
    minflockofcrows = 110 + Math.floor(intuition/5) + wisdom;
    maxflockofcrows = 140 + Math.floor(intuition/5) + wisdom;
    flockofcrows = String(minflockofcrows) + ' - ' + String(maxflockofcrows);
    return flockofcrows
}
function Uves(dexterity){
    uvs = ((450 + 10 * dexterity)/(450 + dexterity)).toFixed(1);
    return uvs
}

function debaffs(dexterity, debaffchance){
    chan = (100 - debaffchance)/100.;
    ch = chan ** Math.max(1, (0.95 + dexterity/55.));
    chance = Math.floor((1 - ch)*100);
    return chance
}
function calculate(level){    
    level = parseInt(level)
    attribute = 0
    i = 1
    while(i < level){
        attribute +=  Math.floor(i / 5 + 3)
        i += 1
	}
    attribute += 31
    return attribute
}

function Armorfunc(armor){
    armor2 = Math.round(100 *(1-((4000+armor)/((4000+armor * 10)))))
    return armor2
}
function calcStat(level, strenght, dexterity, intuition, endurance, wisdom, luck){
    
    level = parseInt(level)
    attribute = 0
    i = 1
    while(i < level){
        attribute +=  Math.floor(i / 5 + 3)
        i += 1
	}
    attribute += 31;

    atrStr = 0;
    atrDex = 0;
    atrInt = 0;
    atrEnd = 0;
    atrWis = 0;
    atrLuck = 0;
    
    strenght = parseInt(strenght);
	n = 1;
    while (n < strenght){
        atrStr +=  Math.floor((n-1)/10) + 2
		n += 1
    }
	m = 1;
    dexterity = parseInt(dexterity);
    while (m < dexterity){
        atrDex += Math.floor((m-1)/10) + 2
		m += 1 
	}
    intuition = parseInt(intuition);
	k = 1;
    while (k < intuition){
        atrInt += Math.floor((k-1)/10) + 2
		k += 1
    }    
	u = 1;
    endurance = parseInt(endurance);
    while (u < endurance){
        atrEnd += Math.floor((u-1)/10) + 2
		u += 1
    }
	o = 1;
    wisdom = parseInt(wisdom);
    while (o < wisdom){
        atrWis += Math.floor((o-1)/10) + 2
		o += 1
    }
	p = 1;
    luck = parseInt(luck);
    while (p < luck){
        atrLuck += Math.floor((p-1)/10) + 2
		p += 1
    }                                
    res = attribute - atrStr - atrDex - atrInt - atrEnd - atrWis - atrLuck;
    return res
}
</script>
